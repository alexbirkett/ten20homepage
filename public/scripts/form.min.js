/*! ten20homepage 2013-07-22 */
window.ten20=window.ten20||{},window.ten20.carouselMaps=function(){var a=[],b=0;return function(c){var d=$(c.getContainer());a.push(d),c.whenReady(function(){var c=d.parent(".carousel");d.parent(".item").removeClass("show"),b++,3==a.length&&(c.css("visibility","visible"),c.carousel(7e3))})}}(),window.ten20.ContactForm=function(){function a(a){this.id=a,this.init()}return a.prototype.init=function(){this.formData={},this.$self=$("#"+this.id),this.fakeCheckBox(),this.bindEvent(),this.bindInput()},a.prototype.bindEvent=function(){var a=this;location.hash==="#"+this.id&&(this.$self.fadeIn(),this.resizeInput()),$('a[href="/#'+this.id+'"]').on("click",function(){a.$self.fadeIn(),a.resizeInput()}),this.$self.find(".cancel").on("click",function(){a.restorePage()}),this.$self.find("button").on("click",function(b){b.preventDefault(),a.checkFields()&&a.send()})},a.prototype.send=function(){var a={},b=this.$self;a.formType=b.attr("id");for(key in this.formData)a[key]="boolean"==typeof this.formData[key].value?this.formData[key].value:this.formData[key].value||"";$.ajaxSetup({timeout:2e3}),$.post("/contact",{data:a},"json").done(function(){b.find(".active").removeClass("active"),b.find(".success").addClass("active")}).fail(function(){b.find(".active").removeClass("active"),b.find(".error").addClass("active")})},a.prototype.bindInput=function(){var a=this;this.$self.find('input[type="text"]').each(function(){a.formData[$(this).attr("id")]={optional:$(this).attr("optional"),value:""},$(this).keyup(function(){a.formData[$(this).attr("id")].value=$(this).val(),$(this).val()&&$(this).removeClass("required"),0===a.$self.find(".required").length&&(a.$self.find(".active").removeClass("active"),a.$self.find(".description").addClass("active"))})})},a.prototype.checkFields=function(){var a=!0;for(key in this.formData)"false"===this.formData[key].optional&&""===this.formData[key].value&&(this.$self.find("#"+key).addClass("required"),a=!1);return a||(this.$self.find(".active").removeClass("active"),this.$self.find(".require").addClass("active")),a},a.prototype.restorePage=function(){this.$self.fadeOut(),window.history.back(),$("body").css("overflow","scroll")},a.prototype.fakeCheckBox=function(){var a=this;this.$self.find('input[type="checkbox"]').each(function(){$(this).addClass("regular-checkbox").after('<label class="fakeCheckBox"></label>'),a.formData[$(this).attr("id")]={optional:"true",value:!1}}),this.$self.find(".fakeCheckBox").on("click",function(){var b=$(this).prev("input");b.prop("checked")?b.prop("checked",!1):b.prop("checked",!0),a.formData[b.attr("id")].value=b.prop("checked")})},a.prototype.resizeInput=function(){var a=this.$self.find(".list-text"),b=this.$self.find(".form ul").innerWidth();$("body").css("overflow","hidden"),a.each(function(){var a=$(this).children("label"),c=a.outerWidth(!0),d=parseInt(a.css("marginRight"));$(this).children('input[type="text"]').width(b-c-d)})},a}(),$(function(){function a(){$(".carousel").each(function(){$(this).children(".carousel-map")||$(this).carousel()})}a(),$(".nav li a").each(function(){var a=$(this).attr("href").slice(1),b=$(this).attr("scroll");if("true"===b){var c=$(a).offset().top;$(this).on("click",function(){$("body").animate({scrollTop:c},800)})}})});